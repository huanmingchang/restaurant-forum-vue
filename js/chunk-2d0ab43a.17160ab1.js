(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"album py-5 bg-light"},[t("div",{staticClass:"container"},[t("UserProfileCard",{attrs:{userProfile:e.userProfile,currentUser:e.currentUser},on:{"add-following":e.handleAddFollowing,"delete-following":e.handleDeleteFollowing}}),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4"},[t("UserFollowingsCard",{attrs:{"initial-user-profile":e.userProfile}}),t("br"),t("UserFollowersCard",{attrs:{"initial-user-profile":e.userProfile}})],1),t("div",{staticClass:"col-md-8"},[t("UserCommentsCard",{attrs:{userProfile:e.userProfile}}),t("br"),t("UserFavoritedRestaurantsCard",{attrs:{userProfile:e.userProfile}})],1)])],1)])},i=[],a=t("5530"),l=t("1da1"),o=(t("d9e2"),t("4de4"),t("d3b7"),t("96cf"),function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"card mb-3"},[t("div",{staticClass:"row no-gutters"},[t("div",{staticClass:"col-md-4"},[t("img",{attrs:{src:e.userProfile.image,width:"300px",height:"300px"}})]),t("div",{staticClass:"col-md-8"},[t("div",{staticClass:"card-body"},[t("h5",{staticClass:"card-title"},[e._v(e._s(e.userProfile.name))]),t("p",{staticClass:"card-text"},[e._v(e._s(e.userProfile.email))]),t("ul",{staticClass:"list-unstyled list-inline"},[t("li",[t("strong",[e._v(" "+e._s(e.userProfile.Comments?e.userProfile.Comments.length:"0"))]),e._v(" 已評論餐廳 ")]),t("li",[t("strong",[e._v(" "+e._s(e.userProfile.FavoritedRestaurants?e.userProfile.FavoritedRestaurants.length:"0"))]),e._v(" 收藏的餐廳 ")]),t("li",[t("strong",[e._v(" "+e._s(e.userProfile.Followings?e.userProfile.Followings.length:"0"))]),e._v(" followings (追蹤者) ")]),t("li",[t("strong",[e._v(" "+e._s(e.userProfile.Followers?e.userProfile.Followers.length:"0"))]),e._v(" followers (追隨者) ")])]),t("p",[e.userProfile.id===e.currentUser.id?t("router-link",{attrs:{to:{name:"user-edit",params:{id:e.userProfile.id}}}},[t("button",{staticClass:"btn btn-primary mr-2",attrs:{type:"submit"}},[e._v(" edit ")])]):[e.userProfile.isFollowed?t("button",{staticClass:"btn btn-danger",attrs:{type:"submit"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.deleteFollowing(e.userProfile.id)}}},[e._v(" 取消追蹤 ")]):t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.addFollowing(e.userProfile.id)}}},[e._v(" 追蹤 ")])]],2)])])])])}),n=[],u={name:"UserProfileCard",props:{userProfile:{type:Object,required:!0},currentUser:{type:Object,required:!0}},methods:{addFollowing:function(e){this.$emit("add-following",e)},deleteFollowing:function(e){this.$emit("delete-following",e)}}},c=u,d=t("2877"),f=Object(d["a"])(c,o,n,!1,null,null,null),m=f.exports,v=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("strong",[e._v(" "+e._s(e.userProfile.Followings?e.userProfile.Followings.length:"0"))]),e._v(" followings (追蹤者) ")]),t("div",{staticClass:"card-body"},e._l(e.userProfile.Followings,(function(e){return t("router-link",{key:e.id,attrs:{to:{name:"user",params:{id:e.id}}}},[t("img",{staticClass:"avatar",attrs:{src:e.image,width:"60",height:"60"}})])})),1)])},h=[],g={name:"UserFollowingsCard",props:{initialUserProfile:{type:Object,required:!0}},data:function(){return{userProfile:this.initialUserProfile}},watch:{initialUserProfile:{handler:function(e){this.userProfile=Object(a["a"])(Object(a["a"])({},this.userProfile),e)},deep:!0,immediate:!0}}},p=g,w=Object(d["a"])(p,v,h,!1,null,null,null),P=w.exports,b=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("strong",[e._v(" "+e._s(e.userProfile.Followers?e.userProfile.Followers.length:"0"))]),e._v(" followers (追隨者) ")]),e._l(e.userProfile.Followers,(function(e){return t("div",{key:e.id,staticClass:"card-body"},[t("router-link",{attrs:{to:{name:"user",params:{id:e.id}}}},[t("img",{staticClass:"avatar",attrs:{src:e.image,width:"60",height:"60"}})])],1)}))],2)},C=[],_={name:"UserFollowersCard",props:{initialUserProfile:{type:Object,required:!0}},data:function(){return{userProfile:this.initialUserProfile}},watch:{initialUserProfile:{handler:function(e){this.userProfile=Object(a["a"])(Object(a["a"])({},this.userProfile),e)},deep:!0,immediate:!0}}},F=_,U=Object(d["a"])(F,b,C,!1,null,null,null),j=U.exports,O=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("strong",[e._v(" "+e._s(e.userProfile.Comments?e.userProfile.Comments.length:"0"))]),e._v(" 已評論餐廳 ")]),t("div",{staticClass:"card-body"},e._l(e.userProfile.Comments,(function(e){return t("router-link",{key:e.id,attrs:{to:{name:"restaurant-show",params:{id:e.Restaurant.id}}}},[t("img",{staticClass:"avatar",attrs:{src:e.Restaurant.image,width:"60",height:"60"}})])})),1)])},k=[],y={name:"UserCommentsCard",props:{userProfile:{type:Object,required:!0}}},x=y,R=Object(d["a"])(x,O,k,!1,null,null,null),$=R.exports,E=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("strong",[e._v(e._s(e.userProfile.FavoritedRestaurants?e.userProfile.FavoritedRestaurants.length:"0"))]),e._v(" 收藏的餐廳 ")]),t("div",{staticClass:"card-body"},e._l(e.userProfile.FavoritedRestaurants,(function(e){return t("router-link",{key:e.id,attrs:{to:{name:"restaurant-show",params:{id:e.id}}}},[t("img",{staticClass:"avatar",attrs:{src:e.image,width:"60",height:"60"}})])})),1)])},q=[],D={name:"UserFavoritedRestaurantsCard",props:{userProfile:{type:Object,required:!0}}},I=D,A=Object(d["a"])(I,E,q,!1,null,null,null),J=A.exports,z=t("4cce"),B=t("2fa3"),G=t("2f62"),H={name:"User",components:{UserProfileCard:m,UserFollowingsCard:P,UserFollowersCard:j,UserCommentsCard:$,UserFavoritedRestaurantsCard:J},data:function(){return{userProfile:{}}},methods:{fetchUserProfile:function(e){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z["a"].get({userId:e});case 3:s=t.sent,i=s.data,r.userProfile=Object(a["a"])(Object(a["a"])({},i.profile),{},{isFollowed:i.isFollowed}),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0),B["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},handleAddFollowing:function(e){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z["a"].addFollowing({userId:e});case 3:if(s=t.sent,i=s.data,"success"===i.status){t.next=7;break}throw new Error(i.message);case 7:r.userProfile=Object(a["a"])(Object(a["a"])({},r.userProfile),{},{isFollowed:!0}),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0),B["a"].fire({icon:"error",title:"無法追蹤使用者，請稍後再試"});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},handleDeleteFollowing:function(e){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,z["a"].deleteFollowing({userId:e});case 3:if(s=t.sent,i=s.data,"success"===i.status){t.next=7;break}throw new Error(i.message);case 7:r.userProfile=Object(a["a"])(Object(a["a"])({},r.userProfile),{},{isFollowed:!1}),r.userProfile=Object(a["a"])(Object(a["a"])({},r.userProfile),{},{Followings:r.userProfile.Followings.filter((function(e){return e.id!==Object(a["a"])({},Object(G["b"])(["currentUser"])).id}))}),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0),B["a"].fire({icon:"error",title:"無法取消追蹤使用者，請稍後再試"});case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()}},computed:Object(a["a"])({},Object(G["b"])(["currentUser"])),beforeRouteUpdate:function(e,r,t){var s=e.params.id;this.fetchUserProfile(s),t()},created:function(){var e=this.$route.params.id;this.fetchUserProfile(e)}},K=H,L=Object(d["a"])(K,s,i,!1,null,null,null);r["default"]=L.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.17160ab1.js.map